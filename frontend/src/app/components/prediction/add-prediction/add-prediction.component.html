<div class="add-patient">
    <button mat-icon-button class="material-icons" (click)="goBack()">
        <mat-icon>
            arrow_back
        </mat-icon>
    </button>
    <h1>Choose disease to predict</h1>
    <div class="form-div">
            <form [formGroup]="diseasesFormGroup">
                <div *ngFor="let disease of diseases; let i = index">
                    <mat-checkbox (change)="onChange($event)" [value]="disease">{{disease.name}}</mat-checkbox>
                </div>
            </form>
    </div>

    <h1>Choose features to use</h1>
    <div class="form-div">
        <form [formGroup]="featuresFormGroup">
            <div *ngFor="let visit of visits; let i = index">
                <span id="visit">Visit date: {{visit.date | date: 'short'}}</span>
                <div *ngFor="let exam of visit.exams; let j = index" id="exam">
                    <span>Exam: {{exam.name}}</span>
                    <div *ngFor="let feature of exam.features; let k = index">
                        <mat-checkbox (change)="onFeatureChange($event)" [value]="feature">{{feature.name}} - {{feature.value}} {{feature.unit}}</mat-checkbox>
                    </div>
                </div>
            </div>
        </form>
        <button mat-raised-button color="primary" (click)="submit()" [disabled]="selected.length == 0">Predict</button>
    </div>
</div>



<div *ngFor="let disease of selected">
    {{disease.name}}:
    <ul *ngFor="let feature of disease.feature_importances.all">
        {{feature[2]}}
    </ul>
</div>


